rabbitmq-container:
    image: rabbitmq:3-management
    command: rabbitmq-server
    expose:
      - 5672
      - 15672
    healthcheck:
      test: [ "CMD", "nc", "-z", "localhost", "5672" ]
      interval: 5s
      timeout: 15s
      retries: 1
  
    worker:
      image: worker
      restart: on-failure
      depends_on:
        - rabbitmq-container

 